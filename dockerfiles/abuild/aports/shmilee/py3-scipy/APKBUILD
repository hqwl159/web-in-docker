# Contributor: Isaac Dunham <ibid.ag@gmail.com>
# Maintainer: shmilee <shmilee.zju@gmail.com>

pkgname=py3-scipy
pkgver=1.0.0
pkgrel=0
pkgdesc="SciPy is open-source software for mathematics, science, and engineering."
url="http://www.scipy.org"
arch="all"
license="BSD"
depends="python3 py3-numpy-f2py"
depends_dev="python3-dev gfortran py-numpy-dev openblas-dev"
makedepends="$depends_dev py-setuptools"
subpackages="$pkgname-dev"
source="https://github.com/scipy/scipy/releases/download/v$pkgver/scipy-$pkgver.zip"
builddir="$srcdir"/scipy-$pkgver

build() {
    cd "$builddir"
    export LDFLAGS="$LDFLAGS -shared"

    python3 setup.py config config_fc --fcompiler=gnu95 || return 1
    python3 setup.py build config_fc --fcompiler=gnu95 || return 1
}

package() {
    cd "$builddir"
    python3 setup.py install --prefix=/usr --root="$pkgdir" || return 1
    install -Dm644 LICENSE.txt \
        "${pkgdir}/usr/share/licenses/$pkgname/LICENSE"
}

sha512sums="074ab4398e754f00cd7c795391ab53453ad4da2acde049c205099177f77d81c8820c293effbeef00ad4e8386b77c2fe548673863be22b383b183e7a2644a8b07  scipy-1.0.0.zip"
